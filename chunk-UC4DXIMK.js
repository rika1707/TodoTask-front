import{$ as st,A as C,B as E,C as G,D as J,E as tt,F as et,G as it,I as q,K as z,L as at,M as ot,N as v,O as N,S as rt,U,V as j,W as _,X as nt,Y as ct,Z as x,_ as k,a as Q,aa as F,b as X,ba as dt,c as K,ca as lt,d as $,da as mt,e as R,ea as pt,f as h,fa as ht,g as B,h as W,ha as ut,i as s,ia as gt,j as n,ja as vt,k as m,ka as _t,l as u,la as ft,m as T,ma as bt,n as b,na as yt,o as d,oa as Ct,p as P,pa as wt,q as Z,qa as xt,r as Y,ra as kt,s as o,sa as It,t as r,ta as Mt,u as y,ua as H,v as p,va as I,w as O,x as L,y as w,z as c}from"./chunk-AJP3TOXR.js";var A=class t{constructor(a){this.httpClient=a}apiUrl=`${j.API_URL}/task`;getTodos(a){return this.httpClient.get(this.apiUrl,{params:{IdUser:a}})}static \u0275fac=function(e){return new(e||t)(W(N))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})};var f=class t{refreshTasks=new K(void 0);refreshTasks$=this.refreshTasks.asObservable();_http=s(N);tasknUrl=`${j.API_URL}/task`;user=JSON.parse(localStorage.getItem("user"));notifyTaskCreated(){this.refreshTasks.next()}createTask(a){return a.userId=this.user.id,this._http.post(this.tasknUrl,a,{headers:{Authorization:"Bearer "+this.user.token}})}updateTask(a){return this._http.put(`${this.tasknUrl}/${a.id}`,a,{headers:{Authorization:"Bearer "+this.user.token}})}processTask(a){return this._http.get(`${this.tasknUrl}/process/${a}`,{headers:{Authorization:"Bearer "+this.user.token}})}deleteTask(a){return this._http.delete(`${this.tasknUrl}/${a}`,{headers:{Authorization:"Bearer "+this.user.token}})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})};var Nt=t=>({"btn-accept":t});function jt(t,a){t&1&&(o(0,"span",12),c(1,"El titulo es obligatorio"),r())}function Ht(t,a){t&1&&(o(0,"span",12),c(1,"Debe tener al menos 3 caracteres"),r())}function Vt(t,a){if(t&1&&(o(0,"p"),b(1,jt,2,0,"span",11)(2,Ht,2,0,"span",11),r()),t&2){let e=O();n(),d("ngIf",e.taskFormControls.titulo.errors==null?null:e.taskFormControls.titulo.errors.required),n(),d("ngIf",e.taskFormControls.titulo.errors==null?null:e.taskFormControls.titulo.errors.minlength)}}function Gt(t,a){t&1&&(o(0,"span",12),c(1,"El descripci\xF3n es obligatorio"),r())}function qt(t,a){t&1&&(o(0,"span",12),c(1,"Debe tener al menos 3 caracteres"),r())}function Ut(t,a){if(t&1&&(o(0,"p"),b(1,Gt,2,0,"span",11)(2,qt,2,0,"span",11),r()),t&2){let e=O();n(),d("ngIf",e.taskFormControls.descripcion.errors==null?null:e.taskFormControls.descripcion.errors.required),n(),d("ngIf",e.taskFormControls.descripcion.errors==null?null:e.taskFormControls.descripcion.errors.minlength)}}var M=class t{_modalSvc=s(I);_modalTaskSvc=s(f);_fb=s(ut);taskForm;_snackBar=s(H);_mat_dialog=s(vt);titulo=this._mat_dialog.data?this._mat_dialog.data.titulo:"";descripcion=this._mat_dialog.data?this._mat_dialog.data.descripcion:"";ngOnInit(){this._buildForm()}_buildForm(){this.taskForm=this._fb.nonNullable.group({titulo:[this.titulo||"",[F.required,F.maxLength(50)]],descripcion:[this.descripcion||"",[F.required,F.maxLength(250)]]})}onSubmit(){return Q(this,null,function*(){if(this._mat_dialog.data){let a={id:this._mat_dialog.data.id,userId:this._mat_dialog.data.userId||"",titulo:this.taskForm.get("titulo")?.value||"",descripcion:this.taskForm.get("descripcion")?.value||"",estado:"pendiente"};this._modalTaskSvc.updateTask(a).subscribe({next:e=>{this._snackBar.open(e.message,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top"}),this.taskForm.reset(),this._modalSvc.closeModal(),this._modalTaskSvc.notifyTaskCreated()},error:e=>{console.log("Error al actualizar la tarea: "+e.error.message)}})}else this._modalTaskSvc.createTask(this.taskForm.value).subscribe({next:a=>{this._snackBar.open(a.message,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top"}),this.taskForm.reset(),this._modalSvc.closeModal(),this._modalTaskSvc.notifyTaskCreated()},error:a=>{console.log("Error al crear la tarea: "+a.error.message)}});this.taskForm.markAllAsTouched()})}getTitle(){return this._mat_dialog.data?"Editar":"Agregar"}onNoClick(){this._modalSvc.closeModal()}get taskFormControls(){return this.taskForm.controls}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-modal-dialog"]],decls:22,vars:10,consts:[["mat-dialog-title",""],[3,"submit","formGroup"],["mat-dialog-content",""],[4,"ngIf"],[1,"row"],["appearance","fill",1,"w-full"],["matInput","","type","text","formControlName","titulo"],["matInput","","type","text","formControlName","descripcion"],["mat-dialog-actions",""],["mat-raised-button","",3,"click","mat-dialog-close"],["mat-raised-button","","color","primary","type","submit",3,"disabled","ngClass"],["class","text-red-500",4,"ngIf"],[1,"text-red-500"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"h1"),c(2),r()(),o(3,"form",1),p("submit",function(){return i.onSubmit()}),o(4,"div",2),b(5,Vt,3,2,"p",3),o(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),c(9," Titulo "),r(),y(10,"input",6),r()(),b(11,Ut,3,2,"p",3),o(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),c(15," Descripci\xF3n "),r(),y(16,"input",7),r()()(),o(17,"div",8)(18,"button",9),p("click",function(){return i.onNoClick()}),c(19,"Cancelar"),r(),o(20,"button",10),c(21),r()()()),e&2&&(n(2),E("",i.getTitle()," Tarea"),n(),d("formGroup",i.taskForm),n(2),d("ngIf",i.taskFormControls.titulo&&i.taskFormControls.titulo.invalid&&i.taskFormControls.titulo.touched),n(6),d("ngIf",i.taskFormControls.descripcion&&i.taskFormControls.descripcion.invalid&&i.taskFormControls.descripcion.touched),n(7),d("mat-dialog-close",!1),n(2),d("disabled",!i.taskForm.valid)("ngClass",J(8,Nt,i.taskForm.valid)),n(),C(i.getTitle()))},dependencies:[gt,mt,st,dt,lt,pt,ht,v,z,at,wt,Mt,It,xt,kt,Ct,_t,ft,yt,bt,k,x],styles:["button.btn-accept[_ngcontent-%COMP%]{background-color:#00f;color:#fff}"],changeDetection:0})};var Qt=["*"];var Xt=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],Kt=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],$t=new B("MAT_CARD_CONFIG"),Et=(()=>{class t{appearance;constructor(){let e=s($t,{optional:!0});this.appearance=e?.appearance||"raised"}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=m({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,l){i&2&&P("mat-mdc-card-outlined",l.appearance==="outlined")("mdc-card--outlined",l.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:Qt,decls:1,vars:0,template:function(i,l){i&1&&(L(),w(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-sys-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-sys-corner-medium));border-width:var(--mdc-outlined-card-outline-width, 1px);border-color:var(--mdc-outlined-card-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return t})(),Ft=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=T({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return t})();var At=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=T({type:t,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return t})();var Rt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=m({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:Kt,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(i,l){i&1&&(L(Xt),w(0),o(1,"div",0),w(2,1),r(),w(3,2))},encapsulation:2,changeDetection:0})}return t})(),Bt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=T({type:t,selectors:[["mat-card-footer"]],hostAttrs:[1,"mat-mdc-card-footer"]})}return t})();var Pt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=u({type:t});static \u0275inj=h({imports:[_,_]})}return t})();var ee=new B("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var Ot=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=u({type:t});static \u0275inj=h({providers:[nt,{provide:ee,useValue:{separatorKeyCodes:[13]}}],imports:[_,ct,_]})}return t})();var Lt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=u({type:t});static \u0275inj=h({imports:[_]})}return t})();var ie=(t,a)=>({"bg-green-500 py-2 px-4 rounded":t,"bg-orange-500 py-2 px-3 rounded":a}),D=class t{task;_modalSvc=s(I);_modalTaskSvc=s(f);_snackBar=s(H);editTask(){this._modalSvc.openModal(M,this.task)}processTask(a){console.log("Procesando la tarea:"+a),this._modalTaskSvc.processTask(a).subscribe({next:e=>{this._snackBar.open(e.message,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top"}),this._modalSvc.closeModal(),this._modalTaskSvc.notifyTaskCreated()},error:e=>{console.log("Error al procesar la tarea: "+e.error.message)}})}deleteTask(a){console.log("Procesando la tarea:"+a),this._modalTaskSvc.deleteTask(a).subscribe({next:e=>{this._snackBar.open(e.message,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top"}),this._modalSvc.closeModal(),this._modalTaskSvc.notifyTaskCreated()},error:e=>{console.log("Error al eliminar la tarea: "+e.error.message)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-todo"]],inputs:{task:"task"},decls:18,vars:9,consts:[["appearance","outlined",1,"example-card"],[1,"flex","justify-between"],[1,"font-semibold","text-slate-700"],[3,"ngClass"],[1,"example-card-footer"],["aria-label","Chihuahua traits",1,"btn-group"],["mat-flat-button","",1,"btn-rounded",3,"click","disabled"],["mat-flat-button","",1,"btn-color","btn-rounded",3,"click","disabled"],["mat-flat-button","",1,"btn-color-red","btn-rounded",3,"click"]],template:function(e,i){e&1&&(o(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title")(3,"p",2),c(4),r()(),o(5,"p",3),c(6),r()(),o(7,"mat-card-content")(8,"p"),c(9),r()(),o(10,"mat-card-footer",4)(11,"div",5)(12,"button",6),p("click",function(){return i.processTask(i.task.id)}),c(13,"Procesar"),r(),o(14,"button",7),p("click",function(){return i.editTask()}),c(15,"Editar"),r(),o(16,"button",8),p("click",function(){return i.deleteTask(i.task.id)}),c(17,"Eliminar"),r()()()()),e&2&&(n(4),C(i.task.titulo),n(),d("ngClass",tt(6,ie,i.task.isComplete,!i.task.isComplete)),n(),C(i.task.estado),n(3),C(i.task.descripcion),n(3),d("disabled",i.task.isComplete),n(2),d("disabled",i.task.isComplete))},dependencies:[Pt,Et,At,Bt,Rt,Ft,Ot,Lt,k,x,v,z],styles:[".example-card[_ngcontent-%COMP%]{min-width:300px;background-color:#faebd7;margin-bottom:2px}.example-card-footer[_ngcontent-%COMP%]{padding:16px}.btn-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:4px}button.btn-color[_ngcontent-%COMP%]{background-color:#4caf50}button.btn-color-red[_ngcontent-%COMP%]{background-color:#f44336}button.btn-rounded[_ngcontent-%COMP%]{border-radius:8px;width:40px;height:30px}"],changeDetection:0})};var ae=(t,a)=>a.id;function oe(t,a){if(t&1&&y(0,"app-todo",7),t&2){let e=a.$implicit;d("task",e)}}var S=class t{tasks;name="Ricardo";user=JSON.parse(localStorage.getItem("user"));_modalSvc=s(I);_modalTaskSvc=s(f);_cdr=s(q);_listTodoSvc=s(A);destroy$=new X;_route=s(rt);ngOnInit(){this.loadTodos(),this._modalTaskSvc.refreshTasks$.pipe($(this.destroy$)).subscribe(()=>{console.log("\u{1F504} Refrescando lista de tareas..."),this.loadTodos()})}loadTodos(){this._listTodoSvc.getTodos(this.user.id).subscribe({next:a=>{this.tasks=a,this._cdr.detectChanges()},error:a=>console.error("Error cargando tareas:",a)})}openDialog(){this._modalSvc.openModal(M)}logout(){localStorage.removeItem("user"),this._route.navigate(["login"])}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-list-todos"]],features:[G([A])],decls:14,vars:4,consts:[[1,"md:p-10","p-8","min-h-full","bg-slate-800","relative"],["mat-raised-button","","type","button",1,"btn-cls",3,"click"],[1,"text-2xl","font-bold","text-center","text-white"],[1,"text-center","text-white"],[1,"flex","justify-center","mt-3"],["mat-raised-button","","color","primary",3,"click"],[1,"md:p-10","sm:p-4","min-h-full","bg-slate-800"],[3,"task"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"button",1),p("click",function(){return i.logout()}),c(2,"Cerrar sesion"),r(),o(3,"h1",2),c(4),et(5,"uppercase"),r(),o(6,"p",3),c(7),r(),o(8,"div",4)(9,"button",5),p("click",function(){return i.openDialog()}),c(10,"Agregar Tarea"),r()(),o(11,"div",6),Z(12,oe,1,1,"app-todo",7,ae),r()()),e&2&&(n(4),E(" HOLA ",it(5,2,i.user.userName),""),n(3),E("Tienes ",i.tasks.length," tareas listadas"),n(5),Y(i.tasks))},dependencies:[D,v,ot,k,x],styles:["button.btn-cls[_ngcontent-%COMP%]{position:absolute;background-color:#84848666;top:10px;right:10px;color:#fff}"]})};var re=[{path:"",component:S},{path:"**",redirectTo:"task"}],V=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=u({type:t});static \u0275inj=h({imports:[U.forChild(re),U]})};var zt=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=u({type:t});static \u0275inj=h({imports:[D,v,V,S]})};export{zt as a};
